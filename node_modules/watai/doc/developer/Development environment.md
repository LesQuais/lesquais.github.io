Development environment
=======================

Build processes are automated through a bash script, `go`. All Node dev dependencies can be installed with:

	cd path/to/watai/clone
	./go dev

The following commands will then be available.


Test
----

Test runner: [Mocha](http://visionmedia.github.com/mocha/).

	npm test

You can execute a subset of tests only if you're working on a specific part. For example, considering you're adding tests to controllers:

	[node_modules/.bin/]mocha test [--watch] test/unit/controller


### Coverage ###

Coverage information is provided by [Istanbul](https://github.com/yahoo/istanbul). You can obtain it with:

	npm test --coverage


### Exhaustive mode ###

Since Watai's integration tests (exit codes checks, CLI options) are long and little prone to fail suddenly, they are not executed in the default `test` command.

To execute all tests, including the longer ones, to ensure no regression was made, use the `--exhaustive` option:

	npm run test-exhaustive


Documentation generation
------------------------

Documentation generator: [JSdoc-toolkit](https://code.google.com/p/jsdoc-toolkit/).

Documentation syntax: [JSdoc-toolkit tags](https://code.google.com/p/jsdoc-toolkit/w/list) and [Closure Annotations](https://developers.google.com/closure/compiler/docs/js-for-compiler).

Assuming OS X and Homebrew:

	brew install jsdoc-toolkit

For other environments, download the [toolkit JAR](https://code.google.com/p/jsdoc-toolkit/downloads/detail?name=jsdoc_toolkit-2.4.0.zip&can=2&q=) and change the `JSDOC_DIR` path in the `go` script.

	./go doc [private]	# add private to include documentation of the private API


Distribution
------------

When updating examples, since this wiki uses some, new archives should be generated using `go export-examples`.

Similarly, for tagged releases, an archive with all dependencies should be exported, in order to allow for an easy install in environments with no fully functional NPM (i.e. behind corporate proxies). Such an archive is created by:

	./go dist

Unless you're an administrator of the main repository, you typically won't need this command.
